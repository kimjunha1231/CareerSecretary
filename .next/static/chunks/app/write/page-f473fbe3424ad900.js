(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{3438:(e,t,s)=>{Promise.resolve().then(s.bind(s,8268))},8268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var l=s(5155),i=s(2115),n=s(6046),r=s(1719),a=s(3518),c=s(6967),o=s(3473),d=s(5686),x=s(7780),h=s(814),m=s(9827),u=s(709);let b={company:"",role:"",jobPostUrl:"",tags:[]},g=[{title:"새 문항",content:"",limit:500}],p=(0,m.v)()((0,u.Zr)((e,t)=>({formData:b,sections:g,currentSectionIndex:0,setFormData:t=>e(e=>({formData:{...e.formData,...t}})),setSections:t=>e({sections:t}),setCurrentSectionIndex:t=>e({currentSectionIndex:t}),addSection:()=>e(e=>{let t=e.sections[e.sections.length-1],s=t?t.limit:500,l=[...e.sections,{title:"새 문항",content:"",limit:s}];return{sections:l,currentSectionIndex:l.length-1}}),removeSection:t=>e(e=>{if(1===e.sections.length)return e;let s=e.sections.filter((e,s)=>s!==t),l=e.currentSectionIndex>=s.length?Math.max(0,s.length-1):e.currentSectionIndex;return{sections:s,currentSectionIndex:l}}),updateSection:(t,s,l)=>e(e=>({sections:e.sections.map((e,i)=>i===t?{...e,[s]:l}:e)})),clearDraft:()=>e({formData:b,sections:[{title:"새 문항",content:"",limit:500}],currentSectionIndex:0})}),{name:"careervault-draft-storage",storage:(0,u.KU)(()=>localStorage)})),f=(0,m.v)(e=>({searchTags:[],searchResults:[],isSearching:!1,setSearchTags:t=>e({searchTags:t}),setSearchResults:t=>e({searchResults:t}),setIsSearching:t=>e({isSearching:t})}));var j=s(351),v=s(3812),N=s(888);let w=[300,500,700,1e3,1500,2e3],y=e=>{let{value:t,onChange:s}=e,[n,a]=(0,i.useState)(!1),[c,o]=(0,i.useState)(t.toString());i.useEffect(()=>{o(t.toString())},[t]);let d=e=>{o(e.toString()),s(e),a(!1)};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",value:c,onChange:e=>{let t=e.target.value;o(t);let l=parseInt(t);!isNaN(l)&&l>0&&s(l)},className:"w-20 bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-sm text-white focus:border-primary focus:outline-none",min:"1"}),(0,l.jsx)("button",{onClick:()=>a(!n),className:"p-1 hover:bg-zinc-800 rounded transition-colors",children:(0,l.jsx)(r.A,{size:16,className:"text-zinc-400"})})]}),n&&(0,l.jsx)("div",{className:"absolute top-full mt-1 bg-zinc-900 border border-zinc-700 rounded shadow-lg z-10",children:w.map(e=>(0,l.jsxs)("button",{onClick:()=>d(e),className:"block w-full text-left px-3 py-2 text-sm text-white hover:bg-zinc-800 transition-colors",children:[e,"자"]},e))})]})};function z(){let e=(0,n.useRouter)(),{addDocument:t}=(0,j.U)(),{setSearchTags:s}=f(),[r,m]=(0,i.useState)(!1),{formData:u,sections:b,currentSectionIndex:g,setFormData:w,setCurrentSectionIndex:z,addSection:S,removeSection:k,updateSection:C,clearDraft:A}=p(),I=async()=>{if(r)return;if(!u.company){h.oR.error("회사명을 입력해주세요.");return}if(b.every(e=>!e.content)){h.oR.error("최소 하나의 문항 내용을 입력해주세요.");return}let l=b.map(e=>"### ".concat(e.title,"\n").concat(e.content)).join("\n\n");try{m(!0),await t({title:"".concat(u.role," at ").concat(u.company),company:u.company,role:u.role,content:l,jobPostUrl:u.jobPostUrl,tags:u.tags}),A(),s([]),e.push("/archive")}catch(e){console.error("Failed to save document:",e),m(!1)}},P=b[g];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 flex-1 min-w-[220px]",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400",children:"회사명"}),(0,l.jsx)("input",{type:"text",value:u.company,onChange:e=>w({company:e.target.value}),className:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary transition-colors",placeholder:"지원 회사"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 flex-1 min-w-[220px]",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400",children:"직무"}),(0,l.jsx)("input",{type:"text",value:u.role,onChange:e=>w({role:e.target.value}),className:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary transition-colors",placeholder:"지원 직무"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 flex-[1.4] min-w-[260px]",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400",children:"채용 공고 링크 (선택)"}),(0,l.jsx)("input",{type:"url",value:u.jobPostUrl,onChange:e=>w({jobPostUrl:e.target.value}),className:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary transition-colors",placeholder:"https://..."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"태그"}),(0,l.jsx)(v.i,{tags:u.tags,onChange:e=>{w({tags:e}),s(e)},placeholder:"태그를 입력하거나 선택하세요 (예: 취미, 성장과정)",className:"bg-surface border-white/10"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between border-t border-white/10 pt-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>{z(Math.max(0,g-1))},disabled:0===g,className:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(a.A,{size:20})}),(0,l.jsxs)("span",{className:"text-sm text-zinc-400",children:["문항 ",g+1," / ",b.length]}),(0,l.jsx)("button",{onClick:()=>{z(Math.min(b.length-1,g+1))},disabled:g===b.length-1,className:"p-2 text-zinc-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(c.A,{size:20})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("button",{onClick:S,className:"flex items-center gap-2 px-3 py-2 text-sm bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors",children:[(0,l.jsx)(o.A,{size:16}),"문항 추가"]}),b.length>1&&(0,l.jsx)("button",{onClick:()=>k(g),className:"p-2 text-zinc-500 hover:text-red-400 transition-colors",children:(0,l.jsx)(d.A,{size:16})})]})]}),(0,l.jsxs)("div",{className:"bg-surface border border-white/10 rounded-xl p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("input",{type:"text",value:P.title,onChange:e=>C(g,"title",e.target.value),className:"flex-1 bg-transparent border-none text-xl font-semibold text-white focus:outline-none",placeholder:"문항 제목"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[(0,l.jsx)("span",{children:"글자 수 제한:"}),(0,l.jsx)(y,{value:P.limit,onChange:e=>C(g,"limit",e)})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("textarea",{value:P.content,onChange:e=>C(g,"content",e.target.value),className:"w-full h-64 bg-zinc-900/50 border border-zinc-700 rounded-lg p-4 text-white focus:border-primary focus:outline-none resize-none",placeholder:"내용을 입력하세요...",maxLength:P.limit}),(0,l.jsx)("div",{className:"absolute bottom-4 right-4",children:(0,l.jsx)(N.A,{text:P.content,onApply:e=>C(g,"content",e)})})]}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500",children:[(0,l.jsxs)("span",{children:[P.content.length," / ",P.limit,"자"]}),(0,l.jsxs)("span",{className:P.content.length>P.limit?"text-red-400":"",children:[P.limit-P.content.length,"자 남음"]})]})]}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)("button",{onClick:I,disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary text-primary-foreground hover:bg-indigo-600 hover:text-white rounded-lg transition-colors disabled:cursor-not-allowed disabled:text-black shadow-lg shadow-primary/20",children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,l.jsx)("span",{children:"저장 중..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.A,{size:18}),(0,l.jsx)("span",{children:"저장하기"})]})})})]})}var S=s(5828);let k=(0,S.createServerReference)("40278ab1431b4038b0c5bf2c6fd9540e89f118d069",S.callServer,void 0,S.findSourceMapURL,"searchDocumentsByTags");var C=s(853),A=s(4081),I=s(4505),P=s(8867),R=s(3920),T=s(8633),U=s(3344),D=s(9286);let E=e=>{let t=["bg-blue-500/15 text-blue-500 border-blue-500/20 hover:bg-blue-500/25","bg-green-500/15 text-green-500 border-green-500/20 hover:bg-green-500/25","bg-purple-500/15 text-purple-500 border-purple-500/20 hover:bg-purple-500/25","bg-orange-500/15 text-orange-500 border-orange-500/20 hover:bg-orange-500/25","bg-pink-500/15 text-pink-500 border-pink-500/20 hover:bg-pink-500/25","bg-cyan-500/15 text-cyan-500 border-cyan-500/20 hover:bg-cyan-500/25","bg-yellow-500/15 text-yellow-500 border-yellow-500/20 hover:bg-yellow-500/25","bg-indigo-500/15 text-indigo-500 border-indigo-500/20 hover:bg-indigo-500/25"],s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);return t[Math.abs(s)%t.length]};function F(){let{searchTags:e,searchResults:t,isSearching:s,setSearchTags:n,setSearchResults:r,setIsSearching:a}=f(),[c,o]=(0,i.useState)(null),[d,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{let t=setTimeout(async()=>{if(0===e.length){r([]);return}a(!0);try{let t=await k(e);r(t)}catch(e){console.error("Failed to search documents:",e)}finally{a(!1)}},300);return()=>clearTimeout(t)},[e,r,a]);let h=(e,t,s)=>{e.stopPropagation(),navigator.clipboard.writeText(t),o(s),setTimeout(()=>o(null),2e3)},m=e=>{x(d===e?null:e)};return(0,l.jsxs)("div",{className:"h-full flex flex-col",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center gap-2 text-indigo-400",children:[(0,l.jsx)(C.A,{size:20}),(0,l.jsx)("h2",{className:"font-semibold text-lg",children:"참고 자료 검색"})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(v.i,{tags:e,onChange:n,placeholder:"태그로 검색 (예: 리더십, 프로젝트)",className:"bg-zinc-900/50 border-white/10",allowCreate:!1})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-4",children:0===e.length?(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500 text-center p-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-zinc-900 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)(A.A,{size:24})}),(0,l.jsxs)("p",{children:["태그를 입력하여",(0,l.jsx)("br",{}),"과거 자소서를 검색해보세요."]})]}):s?(0,l.jsxs)("div",{className:"space-y-4",children:[[1,2,3].map(e=>(0,l.jsxs)("div",{className:"bg-zinc-900/50 rounded-xl p-4 border border-white/5 animate-pulse",children:[(0,l.jsx)("div",{className:"h-4 bg-zinc-800 rounded w-3/4 mb-3"}),(0,l.jsx)("div",{className:"h-20 bg-zinc-800 rounded w-full mb-3"}),(0,l.jsx)("div",{className:"h-8 bg-zinc-800 rounded w-full"})]},e)),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 text-zinc-500 text-sm mt-4",children:[(0,l.jsx)(I.A,{size:14,className:"animate-spin"}),(0,l.jsx)("span",{children:"문서를 검색 중입니다..."})]})]}):0===t.length?(0,l.jsx)("div",{className:"text-center text-zinc-500 p-8 bg-zinc-900/30 rounded-xl border border-white/5",children:(0,l.jsx)("p",{children:"검색 결과가 없습니다."})}):(0,l.jsx)(T.N,{children:t.map(e=>{var t;return(0,l.jsxs)(U.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},onClick:()=>m(e.id),className:"group bg-zinc-900/40 border border-white/5 rounded-xl p-5 transition-all duration-300 backdrop-blur-sm cursor-pointer ".concat(d===e.id?"bg-zinc-900/80 border-indigo-500/30 ring-1 ring-indigo-500/20":"hover:bg-zinc-900/60 hover:border-indigo-500/30"),children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium text-white text-sm",children:e.companyName}),e.subtitle&&(0,l.jsx)("p",{className:"text-xs text-indigo-400 mt-0.5",children:e.subtitle}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:null===(t=e.tags)||void 0===t?void 0:t.map(e=>(0,l.jsx)(D.E,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-5 border ".concat(E(e)),children:e},e))})]})}),(0,l.jsxs)("div",{className:"relative transition-all duration-300 ".concat(d===e.id?"":"max-h-24 overflow-hidden"),children:[e.originalContent.split(/(?=### )/g).map((t,s)=>{if(t.startsWith("### ")){let i=t.indexOf("\n"),n=t.slice(4,i>-1?i:void 0),r=i>-1?t.slice(i+1):"";return(0,l.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsx)("h4",{className:"text-indigo-400 font-bold text-sm",children:n}),(0,l.jsx)("button",{onClick:t=>h(t,r.trim(),"".concat(e.id,"-").concat(s)),className:"p-1 text-zinc-500 hover:text-white hover:bg-white/10 rounded transition-colors",title:"이 문항 복사",children:c==="".concat(e.id,"-").concat(s)?(0,l.jsx)(P.A,{size:12,className:"text-green-400"}):(0,l.jsx)(R.A,{size:12})})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed",children:r.trim()})]},s)}return(0,l.jsx)("p",{className:"text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed mb-3",children:t.trim()},s)}),d!==e.id&&(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-zinc-900/40 to-transparent pointer-events-none"})]})]},e.id)})})})]})}var _=s(3467),M=s(767);function O(){let[e,t]=(0,i.useState)(!1);return(0,l.jsxs)("div",{className:"w-full h-full overflow-hidden flex flex-col relative",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full min-h-0",children:[(0,l.jsxs)("div",{className:"col-span-1 lg:col-span-9 h-full overflow-y-auto pr-2 lg:pr-4 custom-scrollbar pb-20 lg:pb-6",children:[(0,l.jsxs)("div",{className:"mb-6 lg:mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold text-white mb-2",children:"자기소개서 작성"}),(0,l.jsx)("p",{className:"text-zinc-400 text-sm lg:text-base",children:"태그를 활용하여 과거 자소서를 참고하며 작성하세요"})]}),(0,l.jsx)(z,{})]}),(0,l.jsx)("div",{className:"hidden lg:block lg:col-span-3 h-full border-l border-white/10 pl-4 min-h-0",children:(0,l.jsx)(F,{})})]}),(0,l.jsx)("button",{onClick:()=>t(!0),className:"lg:hidden fixed bottom-6 right-6 z-30 w-12 h-12 bg-primary text-white rounded-full shadow-lg flex items-center justify-center hover:bg-primary/90 transition-colors",children:(0,l.jsx)(_.A,{size:20})}),(0,l.jsx)(T.N,{children:e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden"}),(0,l.jsx)(U.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 right-0 w-[85%] max-w-sm bg-surface border-l border-white/10 z-50 lg:hidden shadow-2xl",children:(0,l.jsxs)("div",{className:"h-full flex flex-col p-4",children:[(0,l.jsx)("div",{className:"flex justify-end mb-2",children:(0,l.jsx)("button",{onClick:()=>t(!1),className:"p-2 text-zinc-400 hover:text-white",children:(0,l.jsx)(M.A,{size:24})})}),(0,l.jsx)("div",{className:"flex-1 min-h-0",children:(0,l.jsx)(F,{})})]})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[615,646,303,41,441,517,358],()=>t(3438)),_N_E=e.O()}]);