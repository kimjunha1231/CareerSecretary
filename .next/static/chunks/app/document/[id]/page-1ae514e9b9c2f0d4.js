(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{7664:(e,t,s)=>{Promise.resolve().then(s.bind(s,426))},426:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),n=s(2115),i=s(6046),l=s(351),a=s(7364),o=s(9110),c=s(2423),d=s(767),x=s(7780),h=s(3580),m=s(5686),p=s(8867),u=s(3920),b=s(98),g=s(3628),j=s(3812),f=s(9286),v=s(888);function N(){let e=(0,i.useParams)(),t=null==e?void 0:e.id,s=(0,i.useRouter)(),{documents:N,deleteDocument:w,updateDocument:y}=(0,l.U)(),z=N.find(e=>e.id===t),[k,C]=(0,n.useState)(!1),[A,P]=(0,n.useState)({company:"",role:"",jobPostUrl:"",tags:[],sections:[]}),[U,_]=(0,n.useState)(null),[E,S]=(0,n.useState)(null);if((0,n.useEffect)(()=>{if(z){let e=z.content.split(/(?=### )/g).filter(e=>e.trim()).map(e=>{let t=e.match(/^### (.*)(\n|$)/);return{title:t?t[1].trim():"무제",content:e.replace(/^### .*\n?/,"").trim()}}),t=e.length>0?e:[{title:"자기소개서",content:z.content}];P({company:z.company,role:z.role,jobPostUrl:z.jobPostUrl||"",tags:z.tags||[],sections:t})}},[z]),!z)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh] text-zinc-500",children:[(0,r.jsx)("p",{children:"문서를 찾을 수 없습니다."}),(0,r.jsx)("button",{onClick:()=>s.push("/archive"),className:"mt-4 text-primary hover:underline",children:"아카이브로 돌아가기"})]});let T=async()=>{window.confirm("정말 이 문서를 삭제하시겠습니까?")&&(await w(z.id),s.push("/archive"))},F=async()=>{let e=A.sections.map(e=>"### ".concat(e.title,"\n").concat(e.content)).join("\n\n");await y(z.id,{company:A.company,role:A.role,content:e,jobPostUrl:A.jobPostUrl,tags:A.tags}),C(!1)},O=(e,t)=>{navigator.clipboard.writeText(e),_(t),setTimeout(()=>_(null),2e3)},I=(e,t,s)=>{let r=[...A.sections];r[e]={...r[e],[t]:s},P(e=>({...e,sections:r}))};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto pb-20",children:[(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsxs)("button",{onClick:()=>s.push("/archive"),className:"flex items-center gap-2 text-zinc-400 hover:text-white transition-colors mb-6 group",children:[(0,r.jsx)(a.A,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),(0,r.jsx)("span",{children:"목록으로"})]}),(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 mr-8",children:[k?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[(0,r.jsx)(o.A,{size:18}),(0,r.jsx)("input",{type:"text",value:A.company,onChange:e=>P(t=>({...t,company:e.target.value})),className:"bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-white focus:border-primary focus:outline-none w-full max-w-xs",placeholder:"회사명"})]}),(0,r.jsx)("input",{type:"text",value:A.role,onChange:e=>P(t=>({...t,role:e.target.value})),className:"text-4xl font-bold text-white bg-zinc-900 border border-zinc-700 rounded px-2 py-1 focus:border-primary focus:outline-none w-full",placeholder:"지원 직무"}),(0,r.jsx)("input",{type:"url",value:A.jobPostUrl,onChange:e=>P(t=>({...t,jobPostUrl:e.target.value})),className:"w-full bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-white focus:border-primary focus:outline-none text-sm",placeholder:"채용 공고 링크 (선택)"}),(0,r.jsx)(j.i,{tags:A.tags,onChange:e=>P(t=>({...t,tags:e})),placeholder:"태그 입력...",className:"bg-zinc-900 border-zinc-700"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400 mb-3",children:[(0,r.jsx)(o.A,{size:18}),(0,r.jsx)("span",{className:"font-medium text-lg",children:z.company})]}),(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 leading-tight tracking-tight",children:z.role})]}),!k&&(0,r.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400 bg-white/5 px-3 py-1.5 rounded-full border border-white/5",children:[(0,r.jsx)(c.A,{size:14}),z.createdAt]}),z.tags&&z.tags.map(e=>(0,r.jsx)(f.E,{variant:"secondary",className:"text-xs",children:e},e))]}),z.jobPostUrl&&(0,r.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-zinc-500",children:"채용 공고:"}),(0,r.jsx)("a",{href:z.jobPostUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-indigo-400 hover:underline transition-colors break-all",children:z.jobPostUrl})]})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>C(!1),className:"p-3 text-zinc-400 hover:text-white hover:bg-white/10 transition-all rounded-xl",title:"취소",children:(0,r.jsx)(d.A,{size:20})}),(0,r.jsx)("button",{onClick:F,className:"p-3 bg-indigo-600 text-white hover:bg-indigo-500 transition-all rounded-xl shadow-lg shadow-indigo-500/20",title:"저장",children:(0,r.jsx)(x.A,{size:20})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>C(!0),className:"p-3 text-zinc-400 hover:text-white hover:bg-white/10 transition-all rounded-xl",title:"수정",children:(0,r.jsx)(h.A,{size:20})}),(0,r.jsx)("button",{onClick:T,className:"p-3 text-zinc-500 hover:text-red-400 hover:bg-red-400/10 transition-all rounded-xl",title:"삭제",children:(0,r.jsx)(m.A,{size:20})})]})})]})]}),(0,r.jsx)("div",{className:"space-y-8",children:k?A.sections.map((e,t)=>(0,r.jsxs)("div",{className:"bg-surface border border-white/5 rounded-2xl overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-8 py-6 border-b border-white/5 bg-white/[0.02] flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-7 h-7 rounded-lg bg-primary/20 text-primary text-sm font-mono font-bold shrink-0",children:t+1}),(0,r.jsx)("input",{type:"text",value:e.title,onChange:e=>I(t,"title",e.target.value),className:"w-full bg-transparent border-none text-xl font-semibold text-white focus:outline-none focus:ring-0 placeholder-zinc-600",placeholder:"문항 제목"})]}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)(v.A,{text:e.content,onApply:e=>I(t,"content",e),autoTrigger:E===t})})]}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)("textarea",{value:e.content,onChange:e=>I(t,"content",e.target.value),className:"w-full h-64 bg-zinc-900/50 border border-zinc-700 rounded-lg p-4 text-zinc-300 leading-relaxed focus:border-primary focus:outline-none resize-none",placeholder:"내용을 입력하세요..."})})]},t)):A.sections.map((e,t)=>(0,r.jsxs)("div",{className:"bg-surface border border-white/5 rounded-2xl overflow-hidden hover:border-primary/30 transition-colors shadow-sm group",children:[(0,r.jsxs)("div",{className:"px-8 py-6 border-b border-white/5 bg-white/[0.02] flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center gap-3",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-7 h-7 rounded-lg bg-primary/20 text-primary text-sm font-mono font-bold",children:t+1}),e.title]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>O(e.content,t),className:"text-zinc-500 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5 opacity-0 group-hover:opacity-100",title:"내용 복사",children:U===t?(0,r.jsx)(p.A,{size:18,className:"text-green-400"}):(0,r.jsx)(u.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>{S(t),C(!0)},className:"text-zinc-500 hover:text-purple-400 transition-colors p-2 rounded-lg hover:bg-purple-500/10 opacity-0 group-hover:opacity-100",title:"AI 교정",children:(0,r.jsx)(b.A,{size:18})})]})]}),(0,r.jsx)("div",{className:"p-8 text-zinc-300 leading-relaxed whitespace-pre-wrap text-lg",children:(0,r.jsx)(g.oz,{children:e.content})})]},t))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[646,586,41,441,517,358],()=>t(7664)),_N_E=e.O()}]);