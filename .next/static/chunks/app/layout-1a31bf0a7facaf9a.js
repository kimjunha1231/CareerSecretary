(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{9536:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,7175)),Promise.resolve().then(r.bind(r,5526)),Promise.resolve().then(r.bind(r,4010)),Promise.resolve().then(r.bind(r,6708)),Promise.resolve().then(r.bind(r,351)),Promise.resolve().then(r.t.bind(r,5299,23))},7175:(e,t,r)=>{"use strict";r.d(t,{GlobalAlert:()=>p});var a=r(5155),s=r(2115),i=r(6708),o=r(1027),n=r(9602);let l=(0,o.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:s}),r),...i})});c.displayName="Alert";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});d.displayName="AlertTitle";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...s})});u.displayName="AlertDescription";var h=r(6336),m=r(5340);let p=()=>{let{alert:e,hideAlert:t}=(0,i.A)();if(!e.message)return null;let r="success"===e.type;return(0,a.jsx)("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4 animate-in fade-in slide-in-from-top-4 duration-300",children:(0,a.jsxs)(c,{variant:r?"default":"destructive",className:"".concat(r?"border-green-500/50 text-green-500 bg-green-500/10":""," shadow-lg backdrop-blur-sm"),children:[r?(0,a.jsx)(h.A,{className:"h-4 w-4",color:r?"#22c55e":void 0}):(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(d,{children:r?"성공":"오류"}),(0,a.jsx)(u,{children:e.message})]})})}},5526:(e,t,r)=>{"use strict";r.d(t,{Layout:()=>v});var a=r(5155),s=r(2115),i=r(8173),o=r.n(i),n=r(6046),l=r(8218),c=r(7936),d=r(6709),u=r(6005),h=r(5236),m=r(5796),p=r(3344),x=r(8633),g=r(6708);let f=e=>{let{to:t,icon:r,label:s}=e,i=(0,n.usePathname)()===t;return(0,a.jsxs)(o(),{href:t,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 group relative ".concat(i?"text-white bg-white/5 shadow-[0_0_15px_rgba(255,255,255,0.05)]":"text-zinc-400 hover:text-zinc-100 hover:bg-white/5"," "),children:[(0,a.jsx)("span",{className:"".concat(i?"text-primary":"text-zinc-500 group-hover:text-zinc-300"," "),children:r}),(0,a.jsx)("span",{className:"whitespace-nowrap overflow-hidden",children:s}),i&&(0,a.jsx)(p.P.div,{layoutId:"activeTab",className:"absolute left-0 w-1 h-5 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})},v=e=>{var t,r;let{children:i}=e;(0,n.usePathname)();let[o,v]=(0,s.useState)(!0),{user:w,signInWithGoogle:b,signOut:y}=(0,g.A)();return s.useEffect(()=>{let e=()=>{window.innerWidth<1024?v(!1):v(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-background text-zinc-100 flex font-sans overflow-hidden selection:bg-primary/30 selection:text-white",children:[(0,a.jsx)(x.N,{children:o&&(0,a.jsx)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>v(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden"})}),(0,a.jsxs)(p.P.aside,{layout:!0,initial:!1,animate:{width:o?256:0,x:o?0:-256,opacity:o?1:0},transition:{type:"spring",stiffness:260,damping:32},className:"fixed inset-y-0 left-0 z-50 lg:static lg:z-auto border-r border-border bg-surface/95 backdrop-blur-xl flex flex-col justify-between h-screen overflow-hidden ".concat(!o&&"lg:w-0 lg:border-none"),style:{pointerEvents:o?"auto":"none"},"aria-hidden":!o,children:[(0,a.jsxs)("div",{className:"p-6 w-[256px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded bg-gradient-to-tr from-primary to-purple-600 flex items-center justify-center shadow-lg shadow-primary/20",children:(0,a.jsx)(l.A,{size:18,className:"text-white"})}),(0,a.jsx)("h1",{className:"font-bold text-lg tracking-tight",children:"CoverLetter Vault"})]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),v(!1)},className:"text-zinc-400 hover:text-white transition-colors p-2 hover:bg-white/10 rounded z-10",title:"사이드바 닫기",children:(0,a.jsx)(c.A,{size:18})})]}),(0,a.jsxs)("nav",{className:"space-y-1",children:[(0,a.jsx)(f,{to:"/archive",icon:(0,a.jsx)(d.A,{size:18}),label:"아카이브"}),(0,a.jsx)(f,{to:"/write",icon:(0,a.jsx)(u.A,{size:18}),label:"작성하기"})]})]}),(0,a.jsx)("div",{className:"p-6 space-y-4 w-[256px]",children:(0,a.jsx)("div",{className:"pt-4 border-t border-border/50",children:w?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[w.user_metadata.avatar_url?(0,a.jsx)("img",{src:w.user_metadata.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full border border-zinc-600"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-zinc-700 to-zinc-800 border border-zinc-600 flex items-center justify-center text-xs font-bold",children:null===(t=w.email)||void 0===t?void 0:t[0].toUpperCase()}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-xs font-medium text-white max-w-[100px] truncate",children:w.user_metadata.full_name||(null===(r=w.email)||void 0===r?void 0:r.split("@")[0])})})]}),(0,a.jsx)("button",{onClick:y,className:"text-zinc-500 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded",title:"로그아웃",children:(0,a.jsx)(h.A,{size:14})})]}):(0,a.jsxs)("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-white text-black rounded-lg text-sm font-medium hover:bg-zinc-200 transition-colors",children:[(0,a.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,a.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google 로그인"]})})})]}),(0,a.jsxs)(p.P.main,{layout:!0,transition:{type:"spring",stiffness:260,damping:32},className:"flex-1 relative overflow-y-auto h-screen bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-zinc-900 via-background to-background w-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 pointer-events-none mix-blend-overlay"}),(0,a.jsx)(x.N,{children:!o&&(0,a.jsx)(p.P.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onClick:()=>v(!0),className:"fixed top-6 left-6 z-[40] p-3 bg-surface border border-white/20 rounded-lg text-zinc-400 hover:text-white hover:bg-white/10 transition-all shadow-xl",children:(0,a.jsx)(m.A,{size:20})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-4 md:p-8 relative z-10 h-full",children:i})]})]})}},4010:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});var a=r(5155),s=r(7113),i=r(814);let o=e=>{let{...t}=e,{theme:r="system"}=(0,s.D)();return(0,a.jsx)(i.l$,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})}},6708:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n,A:()=>l});var a=r(5155),s=r(2115);let i=(0,r(1097).createBrowserClient)("https://uoogquwrzytpnyhjkqpk.supabase.co","sb_publishable_t4ETXw2dUK4_0L4m1KepXg_HwmDH7Vx"),o=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)({message:"",type:null}),p=(e,t)=>{m({message:e,type:t}),setTimeout(()=>{m({message:"",type:null})},3e3)};(0,s.useEffect)(()=>{i.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;c(r),n(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),u(!1)});let{data:{subscription:e}}=i.auth.onAuthStateChange((e,t)=>{var r;c(t),n(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),u(!1)});if("success"===new URLSearchParams(window.location.search).get("login")){p("로그인 되었습니다.","success");let e=new URL(window.location.href);e.searchParams.delete("login"),window.history.replaceState({},"",e.toString())}return()=>e.unsubscribe()},[]);let x=async()=>{try{let{error:e}=await i.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e}catch(e){console.error("Error signing in with Google:",e),p("로그인 중 오류가 발생했습니다.","error")}},g=async()=>{try{let{error:e}=await i.auth.signOut();if(e)throw e;p("로그아웃 되었습니다.","success"),window.location.href="/"}catch(e){console.error("Error signing out:",e),p("로그아웃 중 오류가 발생했습니다.","error")}};return(0,a.jsx)(o.Provider,{value:{user:r,session:l,isLoading:d,alert:h,signInWithGoogle:x,signOut:g,showAlert:p,hideAlert:()=>{m({message:"",type:null})}},children:t})},l=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},351:(e,t,r)=>{"use strict";r.d(t,{DocumentProvider:()=>o,U:()=>n});var a=r(5155),s=r(2115);let i=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),c=async()=>{try{l(!0);let e=await fetch("/api/documents");if(401===e.status){o([]);return}if(!e.ok)throw Error("Failed to fetch documents");let t=(await e.json()).map(e=>({id:e.id,title:e.title,company:e.company,role:e.role,content:e.content,createdAt:new Date(e.created_at).toISOString().split("T")[0],jobPostUrl:e.job_post_url,status:e.status||"pending",tags:e.tags||[]}));o(t)}catch(e){console.error("Error fetching documents:",e)}finally{l(!1)}};(0,s.useEffect)(()=>{c()},[]);let d=async e=>{try{if(!(await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create document");await c()}catch(e){throw console.error("Error creating document:",e),e}},u=async e=>{try{if(!(await fetch("/api/documents?id=".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete document");await c()}catch(e){throw console.error("Error deleting document:",e),e}},h=async(e,t)=>{try{if(!(await fetch("/api/documents?id=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update document");await c()}catch(e){throw console.error("Error updating document:",e),e}},m={total:r.length,companies:new Set(r.map(e=>e.company)).size,lastActive:r.length>0?r[0].createdAt:"N/A"};return(0,a.jsx)(i.Provider,{value:{documents:r,addDocument:d,deleteDocument:u,updateDocument:h,stats:m,isLoading:n,refreshDocuments:c},children:t})},n=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useDocuments must be used within a DocumentProvider");return e}},9602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(3463),s=r(9795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[618,615,646,866,286,441,517,358],()=>t(9536)),_N_E=e.O()}]);