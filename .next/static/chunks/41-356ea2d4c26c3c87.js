"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{9286:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(5155);function s(e){let{className:t="",variant:r="default",...s}=e,a={default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/15 text-green-500 hover:bg-green-500/25 border-green-500/20",pending:"border-transparent bg-yellow-500/15 text-yellow-500 hover:bg-yellow-500/25 border-yellow-500/20",fail:"border-transparent bg-red-500/15 text-red-500 hover:bg-red-500/25 border-red-500/20"},i=a[r]||a.default;return(0,n.jsx)("div",{className:"".concat("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"," ").concat(i," ").concat(t),...s})}r(2115)},3812:(e,t,r)=>{r.d(t,{i:()=>p});var n=r(5155),s=r(2115),a=r(767),i=r(4505),l=r(3473),o=r(9286),c=r(5828);let d=(0,c.createServerReference)("004a969b3d2e2158d0ff5411a0adc1982e66e81fab",c.callServer,void 0,c.findSourceMapURL,"getUniqueTags");var u=r(9602);function p(e){let{tags:t=[],onChange:r,placeholder:c="태그 입력...",className:p="",allowCreate:x=!0}=e,[h,m]=(0,s.useState)(""),[f,g]=(0,s.useState)([]),[b,v]=(0,s.useState)([]),[y,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[z,E]=(0,s.useState)(0),k=(0,s.useRef)(null),A=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{N(!0);try{let e=await d();g(e)}catch(e){console.error("Failed to fetch tags:",e)}finally{N(!1)}})()},[]),(0,s.useEffect)(()=>{v(f.filter(e=>e.toLowerCase().includes(h.toLowerCase())&&!t.includes(e))),E(0)},[h,f,t]),(0,s.useEffect)(()=>{let e=e=>{A.current&&!A.current.contains(e.target)&&k.current&&!k.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let S=e=>{let n=e.trim();n&&!t.includes(n)&&(r([...t,n]),m(""),w(!1))},C=e=>{r(t.filter(t=>t!==e))},R=x&&h.trim()&&!b.includes(h.trim())&&!t.includes(h.trim());return(0,n.jsxs)("div",{className:(0,u.cn)("relative",p),children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 p-2 bg-zinc-900 border border-zinc-700 rounded-lg focus-within:border-primary transition-colors",children:[t.map(e=>(0,n.jsxs)(o.E,{variant:"secondary",className:"gap-1 pr-1 text-sm py-1",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>C(e),className:"hover:bg-zinc-700 rounded-full p-0.5 transition-colors",children:(0,n.jsx)(a.A,{size:12})})]},e)),(0,n.jsx)("input",{ref:k,type:"text",value:h,onChange:e=>{m(e.target.value),w(!0)},onFocus:()=>w(!0),onKeyDown:e=>{!e.nativeEvent.isComposing&&("Enter"===e.key?(e.preventDefault(),y&&b.length>0?S(b[z]):h.trim()&&x&&S(h)):"Backspace"===e.key&&!h&&t.length>0?r(t.slice(0,-1)):"ArrowDown"===e.key?(e.preventDefault(),y?E(e=>(e+1)%(b.length+(h&&x?1:0))):w(!0)):"ArrowUp"===e.key?(e.preventDefault(),y?E(e=>(e-1+(b.length+(h&&x?1:0)))%(b.length+(h&&x?1:0))):w(!0)):"Escape"===e.key&&w(!1))},className:"flex-1 bg-transparent border-none outline-none text-white min-w-[120px] text-sm placeholder:text-zinc-500",placeholder:0===t.length?c:""})]}),y&&(h||b.length>0||j)&&(0,n.jsx)("div",{ref:A,className:"absolute top-full left-0 w-full mt-1 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-50 max-h-60 overflow-y-auto",children:j?(0,n.jsxs)("div",{className:"p-4 flex items-center justify-center text-zinc-500 text-sm",children:[(0,n.jsx)(i.A,{size:16,className:"animate-spin mr-2"}),"태그 불러오는 중..."]}):(0,n.jsxs)("div",{className:"p-1",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-zinc-500 px-2 py-1.5",children:"옵션 선택 또는 생성"}),b.map((e,t)=>(0,n.jsx)("button",{onClick:()=>S(e),className:(0,u.cn)("w-full text-left px-2 py-1.5 text-sm rounded flex items-center justify-between group transition-colors",t===z?"bg-zinc-800 text-white":"text-zinc-300 hover:bg-zinc-800 hover:text-white"),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-500 group-hover:bg-primary transition-colors"}),(0,n.jsx)("span",{children:e})]})},e)),R&&(0,n.jsxs)("button",{onClick:()=>S(h),className:(0,u.cn)("w-full text-left px-2 py-1.5 text-sm rounded flex items-center gap-2 transition-colors",b.length===z?"bg-zinc-800 text-white":"text-zinc-300 hover:bg-zinc-800 hover:text-white"),children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-5 h-5 rounded bg-zinc-800 border border-zinc-600",children:(0,n.jsx)(l.A,{size:12})}),(0,n.jsxs)("span",{children:["생성: ",(0,n.jsxs)("span",{className:"text-white font-medium",children:['"',h,'"']})]})]}),!R&&0===b.length&&(0,n.jsx)("div",{className:"px-2 py-4 text-center text-zinc-500 text-sm",children:"검색 결과가 없습니다."})]})})]})}},888:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(5155),s=r(2115),a=r(98),i=r(767),l=r(8867),o=r(1773),c=r(5828);let d=(0,c.createServerReference)("40ce32114bb7ef776e67f4230455ae8a941edffccd",c.callServer,void 0,c.findSourceMapURL,"refineText");function u(e,t){let r=e=>e.split(/(\s+|[.,!?;:()])/).filter(e=>e.length>0),n=r(e),s=r(t),a=n.length,i=s.length,l=Array.from({length:a+1},()=>Array(i+1).fill(0));for(let e=1;e<=a;e++)for(let t=1;t<=i;t++)n[e-1]===s[t-1]?l[e][t]=l[e-1][t-1]+1:l[e][t]=Math.max(l[e-1][t],l[e][t-1]);let o=a,c=i,d=[];for(;o>0||c>0;)o>0&&c>0&&n[o-1]===s[c-1]?(d.unshift({type:"same",value:n[o-1]}),o--,c--):c>0&&(0===o||l[o][c-1]>=l[o-1][c])?(d.unshift({type:"added",value:s[c-1]}),c--):o>0&&(0===c||l[o][c-1]<l[o-1][c])&&(d.unshift({type:"removed",value:n[o-1]}),o--);if(0===d.length)return[];let u=[],p=d[0];for(let e=1;e<d.length;e++)d[e].type===p.type?p.value+=d[e].value:(u.push(p),p=d[e]);return u.push(p),u}var p=r(814),x=r(9602);function h(e){let{text:t,onApply:r,autoTrigger:c=!1}=e,[h,m]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null);s.useEffect(()=>{c&&t&&t.trim().length>=10&&b()},[]);let b=async()=>{if(!t||t.trim().length<10){p.oR.error("교정할 텍스트가 너무 짧습니다. (10자 이상)");return}m(!0);try{let e=await d(t);e?g(e):p.oR.error("AI 교정에 실패했습니다. 잠시 후 다시 시도해주세요.")}catch(e){console.error("Refine failed:",e),p.oR.error("오류가 발생했습니다.")}finally{m(!1)}};return f?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,n.jsxs)("div",{className:"w-full max-w-5xl max-h-[85vh] flex flex-col bg-zinc-900 border border-purple-500/30 rounded-xl overflow-hidden shadow-2xl shadow-purple-900/20 animate-in zoom-in-95 duration-200",children:[(0,n.jsxs)("div",{className:"flex-none flex items-center justify-between px-6 py-4 bg-zinc-950 border-b border-white/5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-purple-400",children:[(0,n.jsx)(a.A,{size:18}),(0,n.jsx)("span",{className:"text-base font-semibold",children:"AI 맞춤법 및 어조 교정"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>{g(null)},className:"p-2 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-lg transition-colors",title:"취소",children:(0,n.jsx)(i.A,{size:20})}),(0,n.jsxs)("button",{onClick:()=>{f&&(r(f.corrected),g(null),p.oR.success("교정된 내용이 적용되었습니다."))},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white text-sm font-medium rounded-lg transition-colors shadow-lg shadow-purple-900/20",title:"적용하기",children:[(0,n.jsx)(l.A,{size:18}),(0,n.jsx)("span",{children:"적용하기"})]})]})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 min-h-full divide-y md:divide-y-0 md:divide-x divide-white/10",children:[(0,n.jsxs)("div",{className:"p-6 bg-zinc-950/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsx)("div",{className:"text-xs text-zinc-500 font-bold uppercase tracking-wider bg-zinc-900 px-2 py-1 rounded",children:"교정 전"})}),(0,n.jsx)("div",{className:"text-zinc-400 text-base leading-relaxed whitespace-pre-wrap",children:u(f.original,f.corrected).map((e,t)=>(0,n.jsx)("span",{className:(0,x.cn)("removed"===e.type&&"bg-red-500/20 text-red-300 line-through decoration-red-500/50","added"===e.type&&"hidden"),children:e.value},t))})]}),(0,n.jsxs)("div",{className:"p-6 bg-purple-900/5",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsx)("div",{className:"text-xs text-purple-400 font-bold uppercase tracking-wider bg-purple-900/20 px-2 py-1 rounded border border-purple-500/20",children:"교정 후"})}),(0,n.jsx)("div",{className:"text-zinc-100 text-base leading-relaxed whitespace-pre-wrap",children:u(f.original,f.corrected).map((e,t)=>(0,n.jsx)("span",{className:(0,x.cn)("added"===e.type&&"bg-green-500/20 text-green-300","removed"===e.type&&"hidden"),children:e.value},t))})]})]})}),f.changes&&f.changes.length>0&&(0,n.jsxs)("div",{className:"flex-none px-6 py-4 bg-zinc-950 border-t border-white/5 flex flex-wrap gap-2 items-center",children:[(0,n.jsx)("span",{className:"text-xs font-medium text-zinc-500 mr-2 uppercase tracking-wider",children:"Changes:"}),f.changes.map((e,t)=>(0,n.jsx)("span",{className:"px-2.5 py-1 bg-purple-500/10 border border-purple-500/20 text-purple-300 text-xs font-medium rounded-full",children:e},t))]})]})}):(0,n.jsx)("button",{onClick:b,disabled:h,className:(0,x.cn)("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200","text-purple-400 hover:text-purple-300 hover:bg-purple-500/10",h&&"opacity-70 cursor-wait"),children:h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{size:16,className:"animate-spin"}),(0,n.jsx)("span",{children:"분석 중..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{size:16}),(0,n.jsx)("span",{children:"AI 교정"})]})})}},351:(e,t,r)=>{r.d(t,{DocumentProvider:()=>i,U:()=>l});var n=r(5155),s=r(2115);let a=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),c=async()=>{try{o(!0);let e=await fetch("/api/documents");if(401===e.status){i([]);return}if(!e.ok)throw Error("Failed to fetch documents");let t=(await e.json()).map(e=>({id:e.id,title:e.title,company:e.company,role:e.role,content:e.content,createdAt:new Date(e.created_at).toISOString().split("T")[0],jobPostUrl:e.job_post_url,status:e.status||"pending",tags:e.tags||[]}));i(t)}catch(e){console.error("Error fetching documents:",e)}finally{o(!1)}};(0,s.useEffect)(()=>{c()},[]);let d=async e=>{try{if(!(await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create document");await c()}catch(e){throw console.error("Error creating document:",e),e}},u=async e=>{try{if(!(await fetch("/api/documents?id=".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete document");await c()}catch(e){throw console.error("Error deleting document:",e),e}},p=async(e,t)=>{try{if(!(await fetch("/api/documents?id=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update document");await c()}catch(e){throw console.error("Error updating document:",e),e}},x={total:r.length,companies:new Set(r.map(e=>e.company)).size,lastActive:r.length>0?r[0].createdAt:"N/A"};return(0,n.jsx)(a.Provider,{value:{documents:r,addDocument:d,deleteDocument:u,updateDocument:p,stats:x,isLoading:l,refreshDocuments:c},children:t})},l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useDocuments must be used within a DocumentProvider");return e}},9602:(e,t,r)=>{r.d(t,{cn:()=>a});var n=r(3463),s=r(9795);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,n.$)(t))}}}]);